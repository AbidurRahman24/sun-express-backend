{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-12">
          <div class="d-flex flex-wrap gap-3 shadow-sm p-3 mb-5 bg-body rounded border-bottom border-gray">
            <!-- This is top section category -->
            {% for data in category %}
            <a target="_blank" href="{% url 'category_wise_post' data.slug %}"
              class="text-decoration-none text-dark">{{data.name}}</a>
            {% endfor %}
          </div>
        </div>
        <!-- This is home page -->
        <div class="col-md-12">
          <div class="d-flex flex-wrap">
            <div class="row">
              <div class="col-md-3  border-end border-3">
                <!-- This is first left side collum -->
                {% for post in sports_posts %}
                <div class="card mb-3">
                  <div class="row g-0 p-2">
                    <div class="col-md-7">
                      <h5 class=""><small><a href="{% url 'detail_article' post.id %}"
                            class="text-dark ">{{post.headline|truncatewords:5}}</a></small>
                      </h5>
                    </div>
                    <div class="col-md-5">
                      <div class="card-body">
                        <img src="{{ post.image.url }}" class="img-fluid rounded-start" alt="...">
                      </div>
                    </div>
                    <small>{{post.body|truncatewords:20 }}</small>
                    <small>
                      <p>Last updated {% if post.last_updated %}
                        {{ post.last_updated|timesince }}
                        {% else %}
                        {{ data.publishing_time|timesince }}
                        {% endif %}
                      </p>
                    </small>
                  </div>
                </div>
                {% endfor %}
              </div>


              <!-- This post -->
              <!-- This is first middle side collum -->
              <div class="col-md-7 border-end border-3">
                <div class="d-flex flex-wrap">
                  <!-- this is top section -->
                  {% for post in data %}
                  <div class="col-sm-12 ">
                    <div class="card mb-3">
                      <div class="row g-0 shadow bg-body rounded">
                        <div class="col-md-5 ">
                          <img src="{{ post.image.url }}" class="card-img-top mx-auto" alt="..." style="width:100%;">
                          <div class="p-2">
                            <p>
                              Category : {% for cat in post.category.all %}
                              <button class="btn btn-primary btn-sm m-1" disabled>{{cat.name}} </button>
                              {% endfor %}
                            </p>
                            <p class="card-text"><small class="text-muted">Author : {{post.editor.user.first_name}}
                                {{post.editor.user.last_name}}</small></p>

                            {% if request.user.is_staff %}
                            <a href="{% url 'edit_article' post.id %}" class="btn btn-outline-info">Edit</a>
                            <a href="{% url 'delete_article' post.id %}" class="btn btn-outline-danger">Delete</a>
                            {% endif %}
                          </div>
                        </div>
                        <div class="col-md-7">
                          <div class="card-body">
                            <h5 class="card-title"><a href="{% url 'detail_article' post.id %}"
                                class="text-dark">{{post.headline}}</a></h5>
                            <p class="card-text"><small>{{post.body|truncatewords:50}}</small></p>
                            <small>
                              <p>Last updated {% if post.last_updated %}{{ post.last_updated|timesince }}{% else %}{{
                                post.publishing_time|timesince }}{% endif %}</p>
                            </small>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  <!-- this is second top section -->
                  <div class="row">
                    {% for post in TotalData %}
                    <div class="col-md-6">
                      <div class="card shadow-none p-2 mb-2 bg-body-tertiary rounded">
                        <img src="{{post.image.url}}" class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title"><a href="{% url 'detail_article' post.id %}"
                              class="text-dark outline-info" onMouseOver="this.style.color='#0F0'"
                              onMouseOut="this.style.color='#00F'">{{post.headline | truncatewords:7}}</a></h5>
                          <p class="card-text">{{post.body | truncatewords:20}}</p>
                        </div>
                        <ul class="list-group list-group-flush px-3">
                          <small>
                            <p>Last updated {% if post.last_updated %}
                              {{ post.last_updated|timesince }}
                              {% else %}
                              {{ data.publishing_time|timesince }}
                              {% endif %}
                            </p>
                          </small>
                        </ul>
                        <div class="card-body">
                          {% if request.user.is_staff %}
                          <a class="btn btn-outline-info" href="{% url 'edit_article' post.id %}">Edit</a>
                          <a class='btn btn-outline-danger' href="{% url 'delete_article' post.id %}">Delete</a>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>


                </div>
              </div>
              <!-- This is first right side collum -->
              <div class="col-md-2 ">
                {% for post in random_data %}
                <div class="card p-2 my-2 shadow bg-body">
                  <small><a href="{% url 'detail_article' post.id %}"
                      class="text-decoration-none text-pramary link-hover">{{post.headline}}</a></small>
                </div>
                <!-- Other post details -->
                {% endfor %}
              </div>

            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% endblock %}